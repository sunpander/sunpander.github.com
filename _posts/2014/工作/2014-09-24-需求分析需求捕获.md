---
layout: post
title: 需求分析--需求捕获(博客摘录2)
---  
  [http://fangang.iteye.com/blog/1506403](http://fangang.iteye.com/blog/1506403 "需求分析应该这样做")
 
 ![需求分析(应该这样做)](../../../media/pic2014/2014-9-23-1.png)  
---
之前是需求的总览,包含定义,拜访,研讨,就是反复的迭代:捕获->整理->验证->再捕获.->  
而其中最重要的就是捕获.在讨论的过程中,如何把客户给的资料,以及客户说的话 进行整理,分析出自己所需要的东西,就是一个需求捕获的过程..
---
##捕获##
1. 需求分析工作是一个迭代的过程：需求捕获->需求整理->需求验证->再需求捕获······需求捕获是这个迭代过程的开始，也是整个需求分析工作中最重要的部分。没有捕获哪来后面的整理与验证工作.
2. 在软件需求捕获过程中，最根本、最容易犯错的问题是什么呢？我认为是一个态度的问题，是采用主动态度去捕获需求，还是采用被动的态度去捕获需求。
3. 经过深入分析我们会发现，从客户嘴中说出来的需求，只是整个软件需求中的冰山一角，还有两类需求需要我们自己去挖掘：客户嘴中没有说出来的需求，和客户压根儿就没有想到的需求。
4. **客户嘴中没有说出来的需求**，并不是客户故意卖弄官子不愿说出来，而是在客户所在业务领域已经约定俗称，在他们看来已经是天经地义，根本就不用说出来的业务规则。[那不当然*]
5. 要求我们在需求分析的整个过程，不断进行业务领域知识的学习。
6. 在我做需求访谈的初期，我往往不是跟客户谈需求，而是先跟客户谈业务。你们是怎样操作的？都经过些什么流程？谁来完成这些操作的？为什么这样操作？等
7. 客户业务领域中的所有操作、所有流程都是有它存在的意义的，它体现了其内部的原因与作用。多问为什么，可以让我们深入地理解这些领域知识，站在客户的视角去思考问题，进而深入地理解客户为什么要提出他们的那些业务需求。
8. **客户压根儿没有想到的需求**。也许你会提出这样的疑问，客户压根儿没有想到的需求我们还提出来做什么？这种压根儿没有想到的，实际是在业务需求阶段压根儿没有想到的，并不代表最终都没有想到。
9. 在业务需求阶段，由于没有可以展示和操作的实物，客户总是在空对空的凭空想象今后的软件应当做成什么样子。这就注定了客户会有很多自己压根儿没有想到的需求。到后期，客户能拿到那些研发成果的实物，去操作，可以看到。这时候，很多他们起初没有想到的需求就会源源不断地被提出来。
10. 虽然客户压根儿没有想到，但需求分析人员是软件研发领域的专业人员，他们应当在深入理解业务领域与需求的基础上，通过分析提前发现这些需求。
11. 客户描述的最原始的需求是**编写在需求列表中的**，而经过需求分析人员的整理、分析与设计，经过用例分析、领域建模，最终形成产品需求说明书（或称为产品规格说明书）。**从需求列表到产品需求说明书，这之间要经过一段长长的路，这段路就是我们的分析与设计，而不是简单的记录与编写文档。**
12. 迭代式的需求分析与开发就出现了。我们先用最短的时间先做一个可以展示和操作的原型给客户看，让客户提一些意见。然后我们再在这个原型的基础上再多做一些，再给客户看。我们就这样一步一步推进，直到最终项目研发结束。
13. **采用这样的方式，最适合那些客户在项目初期提不出什么需求，也没用合适的参照物来进行需求分析的软件项目，特别是那些数据分析与决策类的软件项目。**
14. **客户嘴里说出的需求**。只要是从客户嘴里说出来的，就一定是对的，我们必须照着做的，这种看法是不正确的。因为客户在软件开发方面是非专业的，所以他们在提出需求的时候往往会考虑不够周全。
15. 不仅如此，客户作为一个群体，客户与客户之前对同一问题也可能存在不同的看法，这特别突出地体现在那些多组织机构的管理系统中。
16. 我们的需求捕获最初是源于企业现有的操作流程，但当我们深入理解了客户现有的操作流程以后，应当有意识地发现那些不合理的部分，并最终提出更加合理、更适于信息化管理的流程。
##功能角色分析与用例图##
1. 次参加完需求调研回到公司，我们就应当对需求调研的成果进行一次需求分析。当下一次开始进行需求调研时，我们应当首先将上次需求分析的结果与客户进行确认，同时对需求分析中提出的疑问交给客户予以解答。这就是一个需求捕获->需求整理->需求验证->再需求捕获的过程。 
2. 一般来说，信息化管理类软件项目通常从这几个方面着手分析：**功能角色分析、业务流程分析与业务领域分析。**
3. 首先应当从功能角色分析开始。所谓功能角色分析，就是从一个外部用户的视角分析整个软件系统能够提供的功能，以及这些功能到底是提供给哪些角色使用。 
4. 用例图是贯穿整个面向对象分析/设计（OOA/D）的核心视图，它描述的是系统到底为用户提供了哪些功能，以及到底是哪些用户在使用这些功能，是沟通用户与技术人员的桥梁。运用用例视图对业务需求进行分析、抽象、整理、提炼，进而形成抽象模型的过程称之为用例建模，而这个模型就是用例模型。 
5. 首先从组织机构上划分清楚系统涉及哪些部门、哪些科室，然后在这个基础上划分出来这些部门这各个科室的人员都扮演哪些不同职能的角色，以及完成哪些业务操作。
6. **没有正确理解用例图的视角**。前面我反复强调了，用例图的视角是用户，也就是说，站在用户的角度来观察的我们需要设计的系统。
7. **图形绘制杂乱无章。**一个系统，特别是一个大型系统，提供给用户的功能是繁杂的。 我们绘制用例图要学会拆分，由粗到细地一个一个绘制。先整体的绘制，再划分成各个模块一个一个详细绘制，再进一步细化。所以，描述一个系统应当有许许多多的用例图。 
8. **用例是一个场景。** 一个用例必须有一个场景，也就是时间相近、地点单一的一系列操作，并且这些操作最终应当有一个明确的结果。
9. 功能角色分析是对系统宏观的、整体的需求分析，它用简短的图形绘制出了一个系统的整体轮廓。
##业务流程分析##
1. 我们将从客户调研**现场拿回来的需求，经过一番功能角色分析，**整个系统的整体脉络与轮廓已经被勾画出来。在这个过程中，我们**首先将系统划分成了几个功能模块。然后，我们为每个功能模块绘制用例图。**用例图是站在用户角度去观察的系统，即系统***\为用户提供了哪些功能，这就是功能分析。同时，这些功能是为哪些用户服务的，这就是角色分析。**我们绘制的用例图应当能够为用户所理解，这也是UML其中的一项核心思想——与客户形成统一的、能够相互理解的语言，这对于需求分析过程中与客户的沟通是大有好处的。 
2. 一般来说，我们可以有两个方向细化需求：**业务流程分析与业务领域分析。**
3. 如果我们现在做的需求分析是一个企业信息化管理系统，毫不疑问，我们的软件系统就是在模拟企业已有的那些业务流程。我们进行流程分析，就是要求分析哪些是系统之内的，哪些是系统之外的。
4. 我们做信息化管理，不是要加重人的负担，而应是降低人的负担。以这样的思路去进行流程分析才能设计出优秀的、人见人爱的管理系统出来。因此，我做需求分析，最喜欢下到基层去了解基层业务人员的需求，去分析怎样设计流程才能提高他们的工作效率，而避免加重他们的负担。“水能载舟，也能覆舟。”一套系统是否能顺利推行下去，基层人员是否支持往往起到十分重要的作用。
5. 业务流程分析的另一个重要的分析内容就是流程差异化分析。不同的领导有不同的思路，不同的单位有不同的情况。因此，我们在进行流程分析的时候，常常面临流程差异化的问题。我们说企业信息化就是一次改革，这首先体现在业务流程的规范化操作，也就是消除这种流程差异。
6. 最后，企业信息化就是一次改革，这特别集中地体现在了业务流程分析这一部分。当我们详细分析了客户现有的业务流程以后，应当进一步思考这样的流程是否合理，是否值得改进。
7. 一般来说，我们可以用以下思路来进行我们对流程改进的分析：**清除低效环节、简化业务瓶颈、整合可用资源，以及将繁琐任务自动化。 **
8. 清除低效环节，就是清除那些耗费成本高而收效又低的环节，最典型的就是过量的库存。过量的库存原因很多，有可能是供销环节没有处理好而造成的过量采购，或者生产过剩，也可能是生产计划没有制订好而产生活动间的等待。除此之外，还有重复的活动，等等。
9. 简化业务瓶颈，就是分析业务流程中影响整体进程的瓶颈业务，并有效地简化它。如很多业务审批流程中都有一个受理环节。大量业务都集中在一两个人来集中受理，根本忙不过来，造成整个流程的效率下降。解决的办法有两个：一个是采用信息化的手段进行批量受理，加快处理效率；另一个是将受理环节的任务分散到更多岗位中，降低受理人员的工作量。 
10. 整合可用资源，就是更大范围地整合各个部门、不同职能的人员与社会资源，更加协同地来完成任务，这也是计算机信息化管理最拿手的方面。制造业的供应链管理是最典型的例子，因为实在太经典了我就不累赘了。医院系统也是一个不错的例子：完成了身体检查，医生就立即知道了检查结果；医生开完药，收费处就知道收多少费，药房就知道拿什么药。 
11. 最后是自动化繁重操作。在财务系统中开了销售单，就直接开发票了，并且直接形成报税数据；在网上报完税就知道该缴多少钱，甚至不用去税务局，直接上银行缴，等等等等，不胜枚举。繁重操作自动化，正是信息化系统价值的体现
## 业务领域分析 ##
1. 业务领域分析，就是对需求分析中涉及到的业务实体，以及它们相互之间关联关系的分析。
2. 功能角色分析是从整体角度对整个系统人机交互的分析和理解
3. 业务流程分析,是对功能角色分析基础上,更加细致地去分析和整理那些业务流程,以及组成这些流程的一个个业务操作.
4. **业务流程分析是一种动态分析**,分析的是那些行为,那些操作,但所有操作和行为,最终施与对象都是实体(程序中的类,数据库中的表)
5. 系统中应当有哪些实体，这些实体都有哪些属性，被赋予了哪些行为，它们之间的相互关系是怎样的，就成为了业务领域分析的重要内容，而业务**领域分析也就成为了对系统进行的一种静态分析**。 
6. 我们的软件系统，毫不夸张地说，就是对现实世界的真实模拟。现实世界中的事物，在软件世界中就被模拟成一个对象。该事物在现实世界中赋予什么职责，在软件世界中就赋予什么职责；在现实世界中拥有什么特性，在软件世界中就拥有什么属性；在现实世界中拥有什么行为，在软件世界中就拥有什么函数；在现实世界中与哪些事物存在怎样的关系，在软件世界中就应当与它们发生怎样的关联。这正是面向对象编程的核心思想。 
7. 同的知识领域拥有各自不同的领域知识，需求分析人员就应该通过客户中的领域专家去学习这些知识、掌握这些要点，并最终体现在我们的需求分析中。
8. 而软件的升级完善，从本质上说就是对业务领域不断深入的认识。我们对业务领域的认识深入一点儿，我们的软件系统就完善一分，再深入一点儿，就再完善一分。这就是世界级软件分析大师Eric Evans提出的领域驱动设计的核心思想。 
9. 我们进行业务领域分析，就是通过与用户进行交流，掌握领域知识，然后绘制成业务领域模型，去指导我们软件开发的过程。日后我们去设计开发系统时，应当设计哪些类，类中都应当有什么属性和行为，以及怎样去设计数据库，都是以这个领域模型为基础的
10. 可以通过两种分析方法一步步进行：原文分析法与领域驱动设计
##原文分析法##
1. 原文分析法（Textual Analysis），是在用例说明与流程分析的基础上进行的业务领域分析，是一项在需求研讨会后整理和分析需求的工作。当我们完成了用例图的绘制，为每个用例编写出用例说明以后，原文分析的工作就可以开始了。
2. 在进行原文分析的时候，我们首先要做的事情就是对用例说明中事件流部分的文字描述，提取其中的名词。
3. 领域模型中的实体，往往就在我们通过原文分析提取出来的这些名词中，但需要我们进行进一步分析。
4. 不是所有名词都可以成为实体，首先，系统外的参与者不能。是触发本系统某个事件的人或者物，但它本身存在于系统之外，比如用户使用鼠标点击了一个按钮，而**领域模型是描述系统之内的事物**，因此系统外的参与者应当被排除。其次，系统之内的事物转化到领域模型中，可能会变成两种东西：实体与实体中的属性。什么变成实体而什么变成实体中的属性呢？自身有自己的属性，可以成为系统中行为的执行者或施与者的，才是实体.
5. 另外一个非常重要、值得我们着重关注的地方是名词的多义性。
6. 经过一番分析，我们绘制出了一个基本的领域模型。毫无疑问，这个领域模型使用的是一个类图，实体在图中就是一个个的类。同时，我们将各个类之间的关系标注出来：一对一、一对多、多对多、聚集、组合、继承，等等。为了提高模型的可读性，我们在必要时可以标注关系的名称。如考核指标与执法行为之间是类型与实例的关系，等等。 
7. 重新回到原文分析。这次要分析的不是用例说明中的名词，而是动词， 是为了定义各个实体之间的各种行为。
8. 应当将系统中的行为交给信息专家去执行，而信息专家就是掌握着执行该行为所需数据的实体。
## 领域驱动设计 ##
**有效建模、统一语言和持续学习
你对领域模型的认识被延伸到了整个软件生命周期中，包括之后一次一次的升级完善。你每认识深入一点儿，就可能会体现到你的分析设计中，并最终体现在开发的软件中。你对领域知识认识再深入一点儿，软件就再完善一分。** 
1. 首先，什么是有效的建模呢？当我们作为非专业人员去看一个建筑设计师绘制的图纸时，我们一看就明白这是一栋楼房，那是一座桥梁，为什么？因为图纸形象生动，没有那么多专业术语，我们一看就明白了。软件中的设计图也是一样的道理。 
2. 如果一个用例图，图中的功能都是客户日常经常做的业务操作，并且命名都是业务人员能够理解的业务术语，试问客户会不理解吗？同样，在领域模型中，我们按照客户的思路，运用客户的术语，去绘制一个一个的对象，按照他们的思路去描绘对象间的关系，描绘对象间的操作，他们真的就会看不明白吗？
