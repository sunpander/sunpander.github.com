---
layout: post
title: 需求分析实例[电厂环保管理2] 
---  

***电厂环保管理***  
**本篇主要关注模块分析**
--
-- 
前置条件:有每一分钟各个仪表的实时数据,并且统计了各个仪表的日数据(24点仪表值,或一天的平均值).录入了日运行数据.(包含机组运行小时数,发电量,硫份等)  
 

>**启停统计**  
**前置条件**:知道各仪表值,以及运行,停运判断条件    
**解决问题**:检测设备启停状态
>**内部流程**:
1.每分钟执行一次判断,判断是否满足停运或启动条件,判断条件起初是根据设备电流表电流值判断(如果停运电流小于3A),后提出设备会有一个开关值的,直接根据开关值判断最准确(开启0,关闭1)  
>**重构下画面**(新增修改的功能)
1. 上面是查询条件,左边是设备,右边是记录信息
2. 查询条件有电厂机组,设备,时间起止
3. 左边设备有电厂,机组,设备,仪表编号
4. 右边有设备名称,起止时间,总时间,

---
>**用电量计算**  
**前置条件**:知道各设备仪表值,设备用电计算公式,以及要同时计算的各指标计算公式,以及机组运行小时  
**解决问题**:计算设备日用电量,得到辅机设备日用电报表,同时计算一些日运行相关的指标值       
**内部流程**:  
1. 首先配置出要进行计算的仪表(包含仪表编号,计算公式,设备名称,参数名称)  
2. 针对配置的仪表,到日数据读取当天值以及上一天的值.[值为日平均或者整点值].  
3. 按配置的计算公式,进行用电量计算.<整点的通常求差值,平均的可能会用到运行小时数等,还有一些特殊的>.  
4. 计算了各个设备的,再做一些合计汇总等的计算(比如某个设备的合计等于所有子设备的和,比如某些流量=浓度*密度等)  
5. 最后结合厂发电,计算用电率  
>**程序重构**  
1. 之前配置的公式是写死的.(后来让所有系数都做成可配的,单独建表维护各个公式系数)  
2. 后来发现不单系数可能会变,有可能同一个计算公式同一电厂系数都不一样(这样要求系数要分电厂,分机组,甚至分设备)  
3. 还有一些组合也会变,比如A电厂合计是设备1跟设备2的和,到了B电厂是其他的了.(这就要求一些做汇总的也要能配置)  
4. 问起她们之前怎么做的,她们说就用的excel人工计算的.擦~~后来想就配置一个表,把所有用到的数据都放到这个表中一字排开,如何你要做汇总,自己挑选汇总哪些.使用公式你也自己配置(重点就成了字符串公式的解析了,比如配成[A设备]+[B设备]先找出AB设备值,再相加.目前四则运算没问题)  

---
>**稳定工况**(这个后来发现真是一个大头.运行分析,优化数据来源就是它)   
**前置条件**:设置了稳定工况的条件(包含五大项,每项定义了一个区间,如果每项取值都能落到区间范围内,就是稳定工况),然后定义了稳定工况时间(落到相同区间,保持时间达到设置时间的就做为一个批次记录下来),同时计算该批次对应的采集项值,求平均或者求差值..后来添加了很多指标项的值要求每个批次一起计算..需要另一个表配置,计算五大项以及各指标用到的仪表号信息,还有指标计算公式(目前公式暂时写死,只有系数可配置)  
**最佳工况**对于满足同一区间的稳定工况,依据单耗值和ph判断最佳.  
>**解决问题**:能够了解到五大项的运行情况,以及该情况下的最优值.为后期的运行优化,指标分析提供 底层数据依据  
>**内部流程**  
1. 每一分钟,取五大项值(仪表号写死的).判断是否落在设定的某一个范围内.没有则返回  
2. 如果数据满足某一区间集合,则跟当前工况比较.(当前没有则新增).不同则删除之前的重新插入当前工况,返回  
>3. 如果相同,则更新工况维持时间.没达到 设置的稳定时间则返回  
>4. 达到设置的时间则a.记录该批次(一个时间段),b.并对该批次的采集项进行求平均或求差值 c.该批次的各个指标进行计算.插入 d.判断该批次与已有批次中最优做比较,更新最优(没有最优,则当前设为最优),e.删除采集的明细(只记录时间段的值),继续下一个批次收集    
 
---
>**尿素统计**  
>**前置条件**一个厂,通常有一个溶解罐,和两个储罐.先在溶解罐中加水配置后,导入储罐使用.仪表能够检测每分钟溶解罐和储罐的刻度值..根据刻度值 结合计算公式,能够得到配置量,和消耗量
>**解决问题**统计每日尿素配置量和消耗量.
>**内部流程**   
>1. 根据每分钟的刻度值,可以得到一天内的最大最小值(只保留有效的最大最小,误差范围内的波动忽略不计),最大减去最小乘以底面积 就能求出体积.结合公式就能够算出每次最大到最小波动间的 配置量,消耗量  
>2. 将一天内的配置量,消耗量汇总得到 当日的配置和消耗量

---
>**环保报表**(包含一系列的报表)  
>**前置条件** 知道各仪表的值,并统计出日平均,日读数差.知道要统计的值对应的计算公式,数据来源  
>**解决问题** 按找环保局要求,提供运行数据,可根据这些数据判断电厂运行情况,环保指标值等  
>**操作步骤** 先根据日数据(包含仪表数据可录入的必要数据)做日用电量计算A,得到辅机日厂用电率报表B,再编制环保日报C,再编制dcs日报D...有了此顺序,数据来源也按此顺序,比B的数据从A读取,C的数据从B读取(B中没有则从A读取或自己计算),D的数据类似  
>**内部流程** 这个列详细了就太详细了,要具体到各个指标了.各个专业名词了.   
>1. 日运行数据录入.按机组录入[日发电量,机组日运行小时数,FGD日运行小时数,尿素耗量,煤耗量,煤硫份---]  
>2. 日用电量计算得到各设备用电量,包括石灰石耗量,石膏生成量,so2去除量,用水,用气量,按so2去除量得到各机组的分摊系数,(对于没有分机组的耗量,如果要得到机组的,则用总耗量乘以分摊系数)  
>3. 结合日发电总量,日用电计算得到 辅机厂用电率表(厂发电,厂用电,用电率,各机组发电,用电,用电率,以及各设备用电,用电率,各机组分摊系数)
>4. 结合辅机用电率得到环保日报(分机组的值有:发电量,耗煤量,机组运行小时,标准煤耗,煤硫份,FGD运行小时,FGD投运率,平均脱硫效率,综合脱硫效率,用电率,用电率,石灰石耗量,石膏产生量,so2去除量)(公共的有:总发电,总用电,总用水,总用汽,石膏总生成,石膏外运,石膏库存,石灰石总耗量,石灰石进料,石灰石库存,FGD停运说明)
 



 
 
